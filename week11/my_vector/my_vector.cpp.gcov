        -:    0:Source:my_vector.cpp
        -:    0:Graph:a-my_vector.gcno
        -:    0:Data:a-my_vector.gcda
        -:    0:Runs:1
        -:    1:#include <iostream>
        -:    2:#include <cassert>
        -:    3:
        -:    4:class MyVector {
        -:    5:    int* array_;
        -:    6:    size_t capacity_;
        -:    7:    size_t size_;
        -:    8:
        -:    9: public:
        1:   10:    MyVector() : array_{nullptr}, capacity_{0}, size_{0} {}
        1:   11:    ~MyVector() { delete[] array_; }
        -:   12:    // break the rule of three and ignore copy {constructor, assignment}
        1:   13:    size_t capacity() const { return capacity_; }
  8675310:   14:    size_t size() const { return size_; }
17350618*:   15:    int at(size_t index) const { if (index >= size_) { throw std::out_of_range("at"); } return array_[index]; }
  8675309:   16:    int back() const { return at(size_ - 1); }
        -:   17:
        -:   18:    // TODO(student): implement these 2 functions
       24:   19:    void resize(size_t new_capacity) {
        -:   20:        // 1. New
      24*:   21:        int* new_array = new int[new_capacity];
        -:   22:        // 2. Copy
      24*:   23:        size_t new_size = size_ <= new_capacity ? size_ : new_capacity;
 16777239:   24:        for (size_t i = 0; i < new_size; i++) {
 16777215:   25:            new_array[i] = array_[i];
        -:   26:        }
        -:   27:        // 3. Delete
       24:   28:        delete[] array_;
        -:   29:        // 4. Update
       24:   30:        array_ = new_array;
       24:   31:        capacity_ = new_capacity;
       24:   32:        size_ = new_size;
       24:   33:    }
        -:   34:
  8675309:   35:    void push_back(int value) {
  8675309:   36:        if (array_ == nullptr) {
        1:   37:            array_ = new int[1] {value};
        1:   38:            capacity_ = 1;
        1:   39:            size_ = 1;
        1:   40:            return;
        -:   41:        }
        -:   42:
  8675308:   43:        if (size_ == capacity_) {
       24:   44:            resize(2 * capacity_);
        -:   45:        }
        -:   46:
  8675308:   47:        array_[size_] = value;
  8675308:   48:        size_++;
        -:   49:    }
        -:   50:};
        -:   51:
        1:   52:int main() {
        1:   53:    MyVector vec;
        -:   54:
  8675310:   55:    for (int i = 1; i <= 8675309; i++) {
  8675309:   56:        vec.push_back(i);
 8675309*:   57:        assert(vec.back() == i);
 8675309*:   58:        assert(vec.size() == static_cast<unsigned>(i));
        -:   59:    }
        -:   60:
       1*:   61:    assert(vec.capacity() == 16777216);
       1*:   62:    assert(vec.size() == 8675309);
  8675310:   63:    for (int i = 1; i <= 8675309; i++) {
 8675309*:   64:        assert(vec.at(i-1) == i);
        -:   65:    }
        -:   66:
        1:   67:}
